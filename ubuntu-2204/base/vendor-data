#cloud-config

manage_etc_hosts: true

timezone: America/Chicago

package_update: true
package_upgrade: true
package_reboot_if_required: true
packages:
  - qemu-guest-agent
  - git
  - ansible
  # - landscape-client
  # - apt-transport-https

ca_certs:
  remove_defaults: false
  trusted:
  - |
   -----BEGIN CERTIFICATE-----
   MIIGJDCCBAygAwIBAgIIJx8lmFKcxZAwDQYJKoZIhvcNAQELBQAwgYcxCzAJBgNV
   BAYTAlVTMQswCQYDVQQIEwJNTzEUMBIGA1UEBxMLS2Fuc2FzIENpdHkxDzANBgNV
   BAoTBk1PUlNJTzElMCMGA1UEAxMcTW9yc0lPIENlcnRpZmljYXRlIEF1dGhvcml0
   eTEdMBsGCSqGSIb3DQEJARYOYWRtaW5zQG1vcnMuaW8wHhcNMjMwMzE5MDAwMDAw
   WhcNNDMwMzE4MjM1OTU5WjCBhzELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAk1PMRQw
   EgYDVQQHEwtLYW5zYXMgQ2l0eTEPMA0GA1UEChMGTU9SU0lPMSUwIwYDVQQDExxN
   b3JzSU8gQ2VydGlmaWNhdGUgQXV0aG9yaXR5MR0wGwYJKoZIhvcNAQkBFg5hZG1p
   bnNAbW9ycy5pbzCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAMw1dfSZ
   naPPxriUXnF0QtEEjucrOkbelK/SwCHu+UkztFZdrRpB3m52MvcBuL5Q6vC9mPFq
   BPsTA1GdEUoSqfvH26Y1pxYtmcyRaT+fgmLgvZJNGD83Dkk/taoE5YZnvT03RLCf
   0u7aMVaB5zsj/i/2n38LhpAuazagj76gAwQ43kpbkmduUmqVAOlRQH8MMKchAkgN
   lF5Cl2LO/S/T55LpmekUoiNXrLNT8GJU3npOf01WbcUeOHYFu4JXT8qSAQ/TmzRS
   cgJvpPQfc8BxP5jhMXCuo+KvMAZ0MJswSJZWfmzjtZzVeSphsIkr1yf/TE0EIcxL
   ZGesGohHFq2Lj+kaMWv9sS+2AkmdfhkNXdFnyjovo2d33KbCiwnkriYDFeRo/YYA
   mv+xUCt7/DNVKUZQqlLq4L+dY75NXC+/4C06tEvd0rEm+nnL11PzLXo1Cuankj2c
   60IOxXwOZALo96qhWqXtt+bK2Wb+kVPGJXEgbXbWwwL4Tt2U+4sci+G47yyg2fsI
   V5QE64ajXs12KCioh8SwKzJRmXcAzGhsMr/X+s1Bou27KV5DbVwTrIXcnjGlEjxJ
   sd3xVLW5I7MHke26+oyafYnQHXDtaKpgvP+HSdNM8jk6YG/5+jJIANvDD6Fi7a1o
   qy3egLnqFk6YQaEJuMYR2cr+1hBH2qKnCaTpAgMBAAGjgZEwgY4wDwYDVR0TAQH/
   BAUwAwEB/zAdBgNVHQ4EFgQUSL7LNhEbCwWKU9KYQHQiE+1Noz0wCwYDVR0PBAQD
   AgEGMBEGCWCGSAGG+EIBAQQEAwIABzAaBglghkgBhvhCAQMEDRYLbW9ycy5pby9j
   YS8wIAYJYIZIAYb4QgEEBBMWEW1vcnMuaW8vY2EvY2EuY3JsMA0GCSqGSIb3DQEB
   CwUAA4ICAQCU7Nk1o09FPaK/u2LR03WQqYeLhaj7UKTYo/JU7uhQHLr/p8rRyxEQ
   adDw4vnIH7gOznRDueEl64PZ9lp6CnOzZpqWozu34jcKyKW4TgICHhBEDJLL/mx1
   J3zxgVfb7u937P4TuoSnk1OilHIhS3wwOBI1XsyTu5nyWGJO24DUswivhmLuR05Q
   ACu7splof165AjdvUgpP4DtMGqwmwYBr9jCz/JHeU4TTo3dAimmhadfPBVRj3PuG
   WN2dsG+HF02Ce+th5dyfjR5cMwZ31EB9BMhWNP37hd6oZCF0UhF47sbJF6fxlx2o
   tBO5mTY63KOOhRYbUvvViGr+ipgqlKh6tEw3aygXOx3uhZ2CW9TcbjQKWX2/j3tc
   x3B3zFJqvJbPmTosZBmsxluwjuBKv1hDCQB0osZJBVx9rVxt0CZ1RVgvdU+nfQXr
   iBClM+H9xUNdAViCHxzDFYNSrKmoyIc49UJcxeOivka95+oIDxDlKU2NZo9Jpp/7
   Cr9oBNESCCGghnS+lAL7gqGexNTLIZx49d+Ix8+m6uKNpe2IniwQOm+0GlpXCf4r
   jbpKog7QbtdlkqfZr1oSWnKwR7LS5JTvnQ33M3m9gIewgVnsyJs/LiR56j3Fcji8
   s8ab3iTvKGex4P63UyGFxckiTZE3ddGj2f76/z57znE3WKX4TV/LfQ==
   -----END CERTIFICATE-----
   -----BEGIN CERTIFICATE-----
   MIIGJTCCBA2gAwIBAgIIVrFF37cv9+swDQYJKoZIhvcNAQELBQAwgYcxCzAJBgNV
   BAYTAlVTMQswCQYDVQQIEwJNTzEUMBIGA1UEBxMLS2Fuc2FzIENpdHkxDzANBgNV
   BAoTBk1PUlNJTzElMCMGA1UEAxMcTW9yc0lPIENlcnRpZmljYXRlIEF1dGhvcml0
   eTEdMBsGCSqGSIb3DQEJARYOYWRtaW5zQG1vcnMuaW8wHhcNMjMwMzE5MDAwMDAw
   WhcNNDMwMzE3MjM1OTU5WjCBiDELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAk1PMRQw
   EgYDVQQHEwtLYW5zYXMgQ2l0eTEPMA0GA1UEChMGTU9SU0lPMSYwJAYDVQQDEx1N
   b3JzSU8gSW50ZXJtZWRpYXRlIEF1dGhvcml0eTEdMBsGCSqGSIb3DQEJARYOYWRt
   aW5zQG1vcnMuaW8wggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDKVa34
   ATOhcCjUyGeNEEFaQLctUOm6LL1+HY+HZr6fHCxylvvhOURqcsQAjKpHmR1UgDN4
   LQ6H4CeGFoUIYZUGtjsq7a3UEIEwYHuOn5pXV1D/4/rRBVSBJkKZZYYDD3jgcuk+
   E8uG1VB8gkASrekaX3Ud7gvv4Z9y1H/5fQCXdbCeUD3GEu9FVJwo1ICdtJKzjcB6
   KBNLUnmFGE7pSJqIZTrR/23CniNoODNjI1PBWIdG9i1q4iJj+AA3JXLMjiDjBUt0
   ItZdn8cMp8Glc6m9xe0bBvk8srwiqgOgeI6n+U4c1o894t4Nlcgew9/Q1R+nEJND
   4jlj+2Hb4FLZhr/u2cijQALRYzsaUs/GMXDNPOiWyv12KiTayCEOoV8zeBAw2VTd
   Sdaav9rinQ9BgxjgpwIWk4p0RChL855GvFObHpPHWDllUmsKILeqXxc10J7Shdoj
   x767IGjKvOFtuzJ/WR6SzvidWg/9mQbYzvi7tiZzxnfSK9Qck6WW/fyLw8skQOb/
   kCy2feZp6GuT61DfYUIY9Pg1g8vEY1MJkLGCpgZMoUZnk+Tc9MZ3pIcR/4/+wJgT
   4j7kqXzZn92FZR0LadgYS6atuXZTvuMlvkypgL7+mPNvNMtxjbUh5/0AfChwwxV+
   bn2OvTPYFqaObm6qkAKcvwlq1cFlGEjAvJet9QIDAQABo4GRMIGOMA8GA1UdEwEB
   /wQFMAMBAf8wHQYDVR0OBBYEFDlRgrItbdGxVTWHqhjrc0vr+tzpMAsGA1UdDwQE
   AwIBBjARBglghkgBhvhCAQEEBAMCAAcwGgYJYIZIAYb4QgEDBA0WC21vcnMuaW8v
   Y2EvMCAGCWCGSAGG+EIBBAQTFhFtb3JzLmlvL2NhL2NhLmNybDANBgkqhkiG9w0B
   AQsFAAOCAgEAbIdWBpVOr0mjKDq5XwTEzDLA4zww3dO/ZRAIfhOictkDwKmmy/lD
   vYAZ8saSZqiwVGiz+Pm31wCqOiwFsdsrFXETRmJsfCuaHho2MfaVS9SkJ9fh4CyG
   /BeGje0aZjPyZrANAki19tyxhniFFwtczHAW4S+SlaT2ydqcWg4IFqJwhUK61Dwx
   xyLILnBgepKKRS1ZtIOvlKvlN5t9liYKqa+qU/L1V1Ai6tS++81VjlFelGx3bnPO
   oyVrI1YytEI2BA5yPodl+i569sUHeY+Mryl7RQcKCDofDo7RYY0yk7E+vOoOZBtT
   GA64HPN9qD36kK0fhoAfyLaOSvTgBu983/E+m72hOJLz/982K7hEcZtps4OANIUx
   4G9wmTz5HfTXMZ8qbSg/MOP3XtlVFMliHhzlyoOejpQSVvS0+DLlUC1aAigyAOdD
   HFNAukpUnGHLMHFA6KSHtd7p94rke2nJ4eRLOKR4JD4jA5Vuuh+f4231Qkt2bgxV
   sglwhgbWrWs3eOhdQyMY5mMSY3sf6leqrqUl/24/ewMHMSnHJp09gIGSpmCIx96H
   s5GMbgB/oA1P0UrxfKtplbK6zF2WraNXu/3YjFs9ODH1F/EGi8VHH4ZEd7LU1Qtw
   q8amOq2CZ2cmj5wLs1m7BKvrWe9I3dG9MifU4YKYB1oiaHSv1ICF2Ho=
   -----END CERTIFICATE-----

runcmd:
  - systemctl enable qemu-guest-agent
  - systemctl start qemu-guest-agent
  - git clone https://github.com/micah-mitchell/ansible /tmp/ansible
  - ansible-playbook -i /tmp/ansible/hosts -c local /tmp/ansible/provision.yml
